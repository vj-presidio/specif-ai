<div class="modal-wrapper w-[32rem]">
  <div class="modal-header flex items-center justify-between p-4 border-b">
    <h4 class="font-medium">Settings</h4>
    <button
      type="button"
      class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center focus:outline-none focus:ring-0"
      data-dismiss="modal"
      aria-label="Close"
      (click)="closeModal()"
    >
      <ng-icon name="heroXMark"></ng-icon>
    </button>
  </div>
  <div class="modal-body p-4">
    <!-- Providers Dropdown -->
    <div class="gap-4 mb-4">
      <label for="providerSelect" class="block text-sm font-medium text-secondary-500 mb-2">Providers</label>
      <div class="relative w-full">
        <select
          id="providerSelect"
          [formControl]="selectedProvider"
          class="block w-full px-4 py-3 pr-10 rounded-lg border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 appearance-none cursor-pointer hover:bg-gray-50 sm:text-sm"
        >
          <option *ngFor="let provider of availableProviders" [value]="provider.key" class="py-2">
            {{ provider.displayName }}
          </option>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4">
          <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </div>
      </div>
    </div>
    <!-- Model Dropdown -->
    <div class="gap-4">
      <label for="modelSelect" class="block text-sm font-medium text-secondary-500 mb-2">Model</label>
      <div class="relative w-full">
        <select
          id="modelSelect"
          [formControl]="selectedModel"
          class="block w-full px-4 py-3 pr-10 rounded-lg border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 appearance-none cursor-pointer hover:bg-gray-50 sm:text-sm"
        >
          <option *ngFor="let model of filteredModels" [value]="model" class="py-2">
            {{ model }}
          </option>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4">
          <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </div>
      </div>
    </div>
    <!-- Error Message -->
    <div *ngIf="errorMessage && hasChanges" class="mt-4 p-2 text-danger-600 text-sm">
      {{ errorMessage }}
    </div>
  </div>
  <div *ngIf="hasChanges" class="modal-footer flex justify-end gap-4 p-4">
    <app-button
      buttonContent="Cancel"
      theme="secondary"
      size="sm"
      rounded="lg"
      (click)="closeModal()"
    />
    <app-button
      buttonContent="Save"
      theme="primary"
      size="sm"
      rounded="lg"
      (click)="onSave()"
    />
  </div>
</div>